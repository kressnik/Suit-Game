"use strict";$((function(){const e=new Grid,t=e.create(),s=e.getNextElement(),n=new GridModificator(t,s()),i=new GridDraw({grid:t,boxId:"#game-3",boxBody:".game-box__lines",lineClass:".game-box__line",elementClass:".game-box__suit",boxElement:".game-box__next-element"});i.printNextElement(s()),i.clearBody(),i.create(),$("#game-3 .game-box__suit").on("click",(function(){let t=$(this).parent().data("key-line"),s=$(this).data("key-element"),l=n.change(t,s);i.update(l);let r=e.getNextElement();n.changeElement(r()),i.printNextElement(r())}))}));class Grid{constructor(e=null,t=null,s=null){this.grid=[],this.qtyLine=e||7,this.qtyElement=t||6,this.elementArr=s||["spades","clubs","diams","hearts"]}create(){for(let e=0;e<this.qtyLine;e++){this.grid[e]=[];for(let t=0;t<this.qtyElement;t++)this.grid[e].push(this.elementArr.randElement())}return JSON.parse(JSON.stringify(this.grid))}get(){return JSON.parse(JSON.stringify(this.grid))}nextElement(){return this.elementArr.randElement()}getNextElement(){const e=this.elementArr.randElement();return()=>e}}class GridModificator{constructor(e=null,t=null){this.grid=e,this.selectedElement="",this.changeToElement=t||""}change(e,t){return this.selectedElement=this.grid[e][t],this.selectedElement!==this.changeToElement&&this.dfs(e,t),JSON.parse(JSON.stringify(this.grid))}changeElement(e){this.changeToElement=e}dfs(e,t){const s=[0,1],n=[1,0],i=[0,-1],l=[-1,0];this.grid[e][t]=this.changeToElement;for(const[r,o]of[s,n,i,l]){const s=e+o,n=t+r,i=this.grid.length,l=this.grid[0].length;this.checkSizeGrid(i,l,s,n)&&this.grid[s][n]===this.selectedElement&&this.dfs(s,n)}return!0}checkSizeGrid(e,t,s,n){return 0<=s&&s<e&&0<=n&&n<t}}class GridDraw{constructor({grid:e=null,boxId:t=null,boxBody:s=null,lineClass:n=null,elementClass:i=null,boxElement:l=null}){this.grid=e,this.boxId=t,this.boxBody=s,this.lineClass=n,this.elementClass=i,this.boxElement=l}create(){const e=$(`${this.boxId} ${this.boxBody}`);for(const[t,s]of this.grid.entries()){const n=this.createLine(t);for(const[e,t]of s.entries()){const s=this.createElement(e,t);n.append(s)}e.append(n)}}update(e){this.grid=e;const t=$(`${this.boxId} ${this.boxBody}`);for(const[e,s]of this.grid.entries()){const n=t.find(`${this.lineClass}:eq(${e})`);for(const[e,t]of s.entries()){const s=t?`&${t};`:"";n.find(`:eq(${e})`).removeClass().addClass(`${t} ${this.elementClass.slice(1)}`).html(s)}}}createLine(e=null){return $("<div/>").addClass(this.lineClass.slice(1)).data("key-line",e)}createElement(e=null,t=null){const s=t?`&${t};`:"";return $("<span/>").addClass(this.elementClass.slice(1)).data("key-element",e).addClass(t).html(s)}printNextElement(e){const t=e?`&${e};`:"";$(`${this.boxId} ${this.boxElement} i`).removeClass().addClass(e).html(t)}clearBody(){$(`${this.boxId} ${this.boxBody}`).empty()}}